"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[8900],{97125:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var n=t(85893),i=t(11151);const a={sidebar_position:3},r="Using XC20 Assets in EVM",o={id:"learn/interoperability/xcm/building-with-xcm/send-xc20-evm",title:"Using XC20 Assets in EVM",description:"Overview",source:"@site/docs/learn/interoperability/xcm/building-with-xcm/send-xc20-evm.md",sourceDirName:"learn/interoperability/xcm/building-with-xcm",slug:"/learn/interoperability/xcm/building-with-xcm/send-xc20-evm",permalink:"/docs/learn/interoperability/xcm/building-with-xcm/send-xc20-evm",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/learn/interoperability/xcm/building-with-xcm/send-xc20-evm.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Create XC20 Assets",permalink:"/docs/learn/interoperability/xcm/building-with-xcm/create-xc20-assets"},next:{title:"Making Existing ERC20 Assets Cross-chain Compatible",permalink:"/docs/learn/interoperability/xcm/building-with-xcm/erc20-cross-chain-compatible"}},d={},c=[{value:"Overview",id:"overview",level:2},{value:"Transfer XC20 to EVM address",id:"transfer-xc20-to-evm-address",level:2},{value:"Import Assets on MetaMask",id:"import-assets-on-metamask",level:2},{value:"Transfer XC20 assets to EVM",id:"transfer-xc20-assets-to-evm",level:2},{value:"Step 1: Obtain the ss58 Native Address Mapped to your EVM Address",id:"step-1-obtain-the-ss58-native-address-mapped-to-your-evm-address",level:3},{value:"Step 2: Send asset to an EVM address",id:"step-2-send-asset-to-an-evm-address",level:3}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"using-xc20-assets-in-evm",children:"Using XC20 Assets in EVM"}),"\n",(0,n.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsx)(s.p,{children:"Using XCM within the EVM environment is entirely possible because Astar network uses the XC20 interface, which maps native assets listed in the Assets pallet to an ERC20-compatible interface that EVM dApps can use."}),"\n",(0,n.jsxs)(s.admonition,{type:"info",children:[(0,n.jsx)(s.p,{children:"XC20s and ERC20s are similar, but there are distinct differences to be aware of since XC20s are Substrate-based assets."}),(0,n.jsxs)(s.p,{children:["One of the XC20-specific features is the existence of a ",(0,n.jsx)(s.strong,{children:"minimum-balance"})," threshold, specific to each asset. The minimum-balance of an asset resembles an amount which is sufficient to allow the account's existence on the system without requiring any other existential-deposit. The implication of this feature is that when transferring a certain amount of XC20 tokens, the actual amount transferred may be slightly greater in the case that the transfer would otherwise take the sender balance above zero, but below the minimum balance."]}),(0,n.jsx)(s.p,{children:"In addition, XC20 transactions executed via the Substrate API won\u2019t be visible from EVM-based block explorers such as Blockscout. Only transactions executed via the Ethereum API will be visible through those explorers."}),(0,n.jsx)(s.p,{children:"XC20s can interact through an ERC20 interface, so have the additional benefit of being accessible from both the Substrate and Ethereum APIs. This ultimately provides greater flexibility for developers when working with these types of assets, and allows seamless integrations with EVM-based smart contracts such as DEXs, lending platforms, and others."})]}),"\n",(0,n.jsx)(s.h2,{id:"transfer-xc20-to-evm-address",children:"Transfer XC20 to EVM address"}),"\n",(0,n.jsx)(s.p,{children:"First, let\u2019s approach this at a high level, and move on to a more technical example for dApps."}),"\n",(0,n.jsxs)(s.p,{children:["Let\u2019s say we want to transfer some KSM token from Kusama to ",(0,n.jsx)(s.code,{children:"0xd2C6929A72e466213D1c2Df8359194784650A50e"}),". From the Kusama side of things, the payload for sending the KSM tokens will be similar to the ones we used in the previous ",(0,n.jsx)(s.a,{href:"/docs/learn/interoperability/xcm/building-with-xcm/native-transactions",children:"section"}),".\nHowever, the ",(0,n.jsx)(s.code,{children:"Beneficiary"})," address ",(0,n.jsx)(s.code,{children:"AccountId"})," will be a mapped ss58 address of the recipient\u2019s EVM address, as that is the only address format that XCM will accept. You can read ",(0,n.jsx)(s.a,{href:"https://medium.com/astar-network/using-astar-network-account-between-substrate-and-evm-656643df22a0",children:"this article"})," about how to create the mapped address. To keep things short, the address mappings are:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"H160"}),": ",(0,n.jsx)(s.code,{children:"0xd2C6929A72e466213D1c2Df8359194784650A50e"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"ss58"}),": ",(0,n.jsx)(s.code,{children:"YPRZVFHaRvXdnbAQsXcgqiJokpoHNkUXzR6XTBBJQKHtorT"})," (with prefix 5 for Shiden/Astar)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Public key"}),": ",(0,n.jsx)(s.code,{children:"0x6c65500b73e2cec702f06dcd5299b31e4d0b6cf7728937b7d5edac79611292f2"})]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["To obtain the asset address on the EVM, we will need to retrieve its asset ",(0,n.jsx)(s.code,{children:"Id"}),". In our case, we will be using KSM, which has the asset ",(0,n.jsx)(s.code,{children:"Id"})," ",(0,n.jsx)(s.code,{children:"340282366920938463463374607431768211455"}),". Now we will need to convert the ",(0,n.jsx)(s.code,{children:"Id"})," to hex, and append it to ",(0,n.jsx)(s.code,{children:"0xffffffff"}),". In this example, the resulting address is ",(0,n.jsx)(s.code,{children:"0xFFfFfFffFFfffFFfFFfFFFFFffFFFffffFfFFFfF"}),", which we can now use directly within Solidity smart contracts, or MetaMask. More info in previous ",(0,n.jsx)(s.a,{href:"/docs/learn/interoperability/xcm/building-with-xcm/send-xc20-evm#calculate-xc20-precompile-address",children:"section"})]}),"\n",(0,n.jsx)(s.h2,{id:"import-assets-on-metamask",children:"Import Assets on MetaMask"}),"\n",(0,n.jsx)(s.p,{children:"On the previous page, we created a new asset and generated the contract address. Now, let's add it to MetaMask:"}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsx)(s.p,{children:"If you can't enter anything in the decimals field, then you haven't minted any assets. Ensure you have minted some assets before proceeding to the next step."})}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Make sure you are connected to ",(0,n.jsx)(s.a,{href:"https://app.gitbook.com/o/-LgGrgOEDyFYjYWIb1DT/s/-M8GVK5H7hOsGnYqg-7q-872737601/~/changes/aJQFFWQNMjlao1SSjj4a/integration/network-details",children:"the network"})," where you created your token."]}),"\n",(0,n.jsx)(s.li,{children:"Near the bottom of the asset overview section, click Import Tokens."}),"\n",(0,n.jsxs)(s.li,{children:["Enter the following:","\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Token Contract Address"}),"\n",(0,n.jsx)(s.li,{children:"Token Symbol"}),"\n",(0,n.jsx)(s.li,{children:"Token Decimals"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"Add Custom Token",src:t(33919).Z+"",width:"350",height:"589"})}),"\n",(0,n.jsx)(s.p,{children:"As you can see in the image above, importing an asset by its contract address will allow MetaMask to read the metadata correctly, and add it to your wallet."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"Assets overview",src:t(8695).Z+"",width:"1213",height:"871"})}),"\n",(0,n.jsx)(s.h2,{id:"transfer-xc20-assets-to-evm",children:"Transfer XC20 assets to EVM"}),"\n",(0,n.jsx)(s.h3,{id:"step-1-obtain-the-ss58-native-address-mapped-to-your-evm-address",children:"Step 1: Obtain the ss58 Native Address Mapped to your EVM Address"}),"\n",(0,n.jsx)(s.p,{children:"To transfer your newly minted assets to the EVM, you will need to obtain the mapped ss58 (Substrate native) address linked to your H160 (MetaMask) address. You are able to obtain that address by following these steps:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Open our EVM to Substrate address ",(0,n.jsx)(s.a,{href:"https://hoonsubin.github.io/evm-substrate-address-converter/",children:"converter"}),"."]}),"\n",(0,n.jsx)(s.li,{children:"Switch to the H160 address scheme."}),"\n",(0,n.jsx)(s.li,{children:"Copy your EVM address from MetaMask and paste it into the Input address field."}),"\n",(0,n.jsx)(s.li,{children:"Your mapped native address will be displayed."}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"EVM to Substrate address converter",src:t(30762).Z+"",width:"1002",height:"535"})}),"\n",(0,n.jsx)(s.h3,{id:"step-2-send-asset-to-an-evm-address",children:"Step 2: Send asset to an EVM address"}),"\n",(0,n.jsxs)(s.p,{children:["For this section, we need to return to ",(0,n.jsx)(s.a,{href:"https://polkadot.js.org/apps/",children:"Polkadot.js Apps"}),". Make sure you are connected to the same network on which you created your asset."]}),"\n",(0,n.jsx)(s.p,{children:"In this guide, we will send 1000 of the newly minted assets to an EVM account."}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Navigate to ",(0,n.jsx)(s.code,{children:"Developer -> Extrinsics"})]}),"\n",(0,n.jsxs)(s.li,{children:["Use the ",(0,n.jsx)(s.code,{children:"assets -> transfer"})," extrinsic."]}),"\n",(0,n.jsx)(s.li,{children:"Select the account that has permission to send the asset."}),"\n",(0,n.jsxs)(s.li,{children:["Enter the ",(0,n.jsx)(s.code,{children:"asset id"}),". See the previous page to determine what asset id you will need to enter. In this example, we are using ",(0,n.jsx)(s.code,{children:"19992021"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["Enter your native address in the ",(0,n.jsx)(s.code,{children:"Id"})," field, the one you received after converting your EVM address to native."]}),"\n",(0,n.jsxs)(s.li,{children:["The last field is the amount, and we want to send ",(0,n.jsx)(s.code,{children:"1000"})," tokens. In this example, we enter ",(0,n.jsx)(s.code,{children:"1000"})," followed by 18 zeros, due to the asset requiring 18 decimals of precision."]}),"\n",(0,n.jsx)(s.li,{children:"Sign and Submit the transaction."}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"Overview",src:t(25361).Z+"",width:"1755",height:"616"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"XC20 on MetaMask",src:t(26460).Z+"",width:"1214",height:"879"})}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"We are working closely with our block explorers to map new assets, so they will be visible in our explorers."}),"\n",(0,n.jsx)(s.li,{children:"If you receive an error transferring your tokens to another EVM account, try increasing the gas fee."}),"\n"]})})]})}function h(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8695:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/10-1f7c37665a1f1ccbc285d5d842aa38d9.png"},30762:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/11-1ab645cf5804e67ac78939bc434704e6.png"},25361:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/12-c91f2a5a1e67473a5446a4fd39a31a78.png"},26460:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/13-5991370b5397674c791d5ebbb4edf5f1.png"},33919:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/9-8baf6a17871057e3c97f4bd1a1482d1d.png"},11151:(e,s,t)=>{t.d(s,{Z:()=>o,a:()=>r});var n=t(67294);const i={},a=n.createContext(i);function r(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);