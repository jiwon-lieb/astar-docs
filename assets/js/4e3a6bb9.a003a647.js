"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[8474],{79377:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>h,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>m});var n=a(85893),r=a(11151),t=a(74866),l=a(85162);const i={sidebar_position:7,title:"Astar zkEVM Fee Calculation",sidebar_label:"Fee Calculation"},c=void 0,o={id:"build/zkEVM/fee",title:"Astar zkEVM Fee Calculation",description:"How do network fees on Astar zkEVM work?",source:"@site/docs/build/zkEVM/fee.md",sourceDirName:"build/zkEVM",slug:"/build/zkEVM/fee",permalink:"/docs/build/zkEVM/fee",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/build/zkEVM/fee.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"Astar zkEVM Fee Calculation",sidebar_label:"Fee Calculation"},sidebar:"tutorialSidebar",previous:{title:"Setup zkEVM Testnet RPC",permalink:"/docs/build/zkEVM/zk-node/setup-testnet-rpc-node"},next:{title:"Integrations",permalink:"/docs/build/zkEVM/integrations/"}},h={},m=[{value:"How do network fees on Astar zkEVM work?",id:"how-do-network-fees-on-astar-zkevm-work",level:2},{value:"Fetch gas price from RPC node",id:"fetch-gas-price-from-rpc-node",level:2},{value:"Use Blockscout Price Oracle",id:"use-blockscout-price-oracle",level:2},{value:"cURL",id:"curl",level:4},{value:"JavaScript",id:"javascript",level:4},{value:"Python",id:"python",level:4},{value:"cURL",id:"curl-1",level:4},{value:"JavaScript",id:"javascript-1",level:4},{value:"Python",id:"python-1",level:4},{value:"The Price Oracle Response",id:"the-price-oracle-response",level:3}];function d(e){const s={a:"a",annotation:"annotation",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"how-do-network-fees-on-astar-zkevm-work",children:"How do network fees on Astar zkEVM work?"}),"\n",(0,n.jsx)(s.p,{children:"In Astar zkEVM the gas fee is calculated by applying a fixed factor over L1 gas fee. That price factor is a fixed value and doesn't change often and it's value is based the rollup's cost to publish tx to L1. To Simply put, gas prices in L2 will linearly follow gas prices in L1."}),"\n",(0,n.jsx)(s.span,{className:"katex-display",children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"L"}),(0,n.jsxs)(s.msub,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsx)(s.mo,{stretchy:"false",children:"{"})]}),(0,n.jsx)(s.mi,{children:"g"}),(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"s"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,n.jsx)(s.mi,{children:"f"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mo,{stretchy:"false",children:"}"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mi,{children:"L"}),(0,n.jsxs)(s.msub,{children:[(0,n.jsx)(s.mn,{children:"1"}),(0,n.jsx)(s.mo,{stretchy:"false",children:"{"})]}),(0,n.jsx)(s.mi,{children:"g"}),(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"s"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,n.jsx)(s.mi,{children:"f"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mo,{stretchy:"false",children:"}"}),(0,n.jsx)(s.mo,{children:"\u2217"}),(0,n.jsx)(s.mi,{children:"F"}),(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"c"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"o"}),(0,n.jsx)(s.mi,{children:"r"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"L2_\\{gas\\_fee\\} = L1_\\{gas\\_fee\\} * Factor"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1.1052em",verticalAlign:"-0.3552em"}}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"L"}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(s.span,{className:"vlist-r",children:[(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.3448em"},children:(0,n.jsxs)(s.span,{style:{top:"-2.5198em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(s.span,{className:"mopen mtight",children:"{"})})]})}),(0,n.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.3552em"},children:(0,n.jsx)(s.span,{})})})]})})]}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,n.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"ee"}),(0,n.jsx)(s.span,{className:"mclose",children:"}"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1.1052em",verticalAlign:"-0.3552em"}}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"L"}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"1"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(s.span,{className:"vlist-r",children:[(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.3448em"},children:(0,n.jsxs)(s.span,{style:{top:"-2.5198em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(s.span,{className:"mopen mtight",children:"{"})})]})}),(0,n.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.3552em"},children:(0,n.jsx)(s.span,{})})})]})})]}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,n.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"ee"}),(0,n.jsx)(s.span,{className:"mclose",children:"}"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"c"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"or"})]})]})]})}),"\n",(0,n.jsx)(s.p,{children:"The L1 fee will vary depending on the amount of transactions on the L1. If the timing of your transaction is flexible, you can save costs by submitting transactions during periods of lower gas on the L1 (for example, over the weekend)"}),"\n",(0,n.jsxs)(s.p,{children:["The support for congestion mechanism based EIP-1559 ",(0,n.jsx)(s.a,{href:"https://eips.ethereum.org/EIPS/eip-1559",children:"here"})," is planned for future and will make the L2 gas fee dynamic."]}),"\n",(0,n.jsx)(s.h2,{id:"fetch-gas-price-from-rpc-node",children:"Fetch gas price from RPC node"}),"\n",(0,n.jsx)(s.p,{children:"The gas price can be fetched from the Astar zkEVM Sequencer using the following RPC call:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'curl https://rpc.startale.com/zkyoto \\\n  -X POST \\\n  -H "Content-Type: application/json" \\\n  --data \'{"method":"eth_gasPrice","params":[],"id":1,"jsonrpc":"2.0"}\'\n'})}),"\n",(0,n.jsx)(s.p,{children:"The result is the hex value of the gas price in wei."}),"\n",(0,n.jsx)(s.h2,{id:"use-blockscout-price-oracle",children:"Use Blockscout Price Oracle"}),"\n",(0,n.jsxs)(s.p,{children:["Blockscout Price Oracle calculates the gas price from the average of previous blocks. It doesn't call ",(0,n.jsx)(s.code,{children:"eth_gasPrice"}),"."]}),"\n",(0,n.jsxs)(t.Z,{children:[(0,n.jsxs)(l.Z,{value:"Mainnet",label:"Astar zkEVM",default:!0,children:[(0,n.jsxs)(s.p,{children:["Send a GET request to the ",(0,n.jsx)(s.a,{href:"https://astar-zkevm.explorer.startale.com/api/v1/gas-price-oracle",children:"Blockscout Price Oracle endpoint"})," to get a gas price recommendation from this oracle."]}),(0,n.jsx)(s.h4,{id:"curl",children:"cURL"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl https://astar-zkevm.explorer.startale.com/api/v1/gas-price-oracle\n"})}),(0,n.jsx)(s.h4,{id:"javascript",children:"JavaScript"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"fetch('https://astar-zkevm.explorer.startale.com/api/v1/gas-price-oracle')\n  .then(response => response.json())\n  .then(json => console.log(json))\n"})}),(0,n.jsx)(s.h4,{id:"python",children:"Python"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"import requests\nrequests.get('https://astar-zkevm.explorer.startale.com/api/v1/gas-price-oracle').json()\n"})})]}),(0,n.jsxs)(l.Z,{value:"testnet",label:"zKatana testnet",children:[(0,n.jsxs)(s.p,{children:["Send a GET request to the ",(0,n.jsx)(s.a,{href:"https://zkatana.blockscout.com/api/v1/gas-price-oracle",children:"Blockscout Price Oracle endpoint"})," to get a gas price recommendation from this oracle."]}),(0,n.jsx)(s.h4,{id:"curl-1",children:"cURL"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl https://zkatana.blockscout.com/api/v1/gas-price-oracle\n"})}),(0,n.jsx)(s.h4,{id:"javascript-1",children:"JavaScript"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"fetch('https://zkatana.blockscout.com/api/v1/gas-price-oracle')\n  .then(response => response.json())\n  .then(json => console.log(json))\n"})}),(0,n.jsx)(s.h4,{id:"python-1",children:"Python"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"import requests\nrequests.get('https://zkatana.blockscout.com/api/v1/gas-price-oracle').json()\n"})})]})]}),"\n",(0,n.jsx)(s.h3,{id:"the-price-oracle-response",children:"The Price Oracle Response"}),"\n",(0,n.jsx)(s.p,{children:"An example JSON response from Blockscout Price Oracle will look like this:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n    "average":3.02,\n    "fast":3.02,\n    "slow":3.02,\n}\n'})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["slow"," are gas prices in Gwei, you can use these prices before sending the transaction off to Astar zkEVM."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},85162:(e,s,a)=>{a.d(s,{Z:()=>l});a(67294);var n=a(86010);const r={tabItem:"tabItem_Ymn6"};var t=a(85893);function l(e){let{children:s,hidden:a,className:l}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,n.Z)(r.tabItem,l),hidden:a,children:s})}},74866:(e,s,a)=>{a.d(s,{Z:()=>N});var n=a(67294),r=a(86010),t=a(12466),l=a(16550),i=a(20469),c=a(91980),o=a(67392),h=a(50012);function m(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:s,children:a}=e;return(0,n.useMemo)((()=>{const e=s??function(e){return m(e).map((e=>{let{props:{value:s,label:a,attributes:n,default:r}}=e;return{value:s,label:a,attributes:n,default:r}}))}(a);return function(e){const s=(0,o.l)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,a])}function u(e){let{value:s,tabValues:a}=e;return a.some((e=>e.value===s))}function p(e){let{queryString:s=!1,groupId:a}=e;const r=(0,l.k6)(),t=function(e){let{queryString:s=!1,groupId:a}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:s,groupId:a});return[(0,c._X)(t),(0,n.useCallback)((e=>{if(!t)return;const s=new URLSearchParams(r.location.search);s.set(t,e),r.replace({...r.location,search:s.toString()})}),[t,r])]}function x(e){const{defaultValue:s,queryString:a=!1,groupId:r}=e,t=d(e),[l,c]=(0,n.useState)((()=>function(e){let{defaultValue:s,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!u({value:s,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:s,tabValues:t}))),[o,m]=p({queryString:a,groupId:r}),[x,j]=function(e){let{groupId:s}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(s),[r,t]=(0,h.Nk)(a);return[r,(0,n.useCallback)((e=>{a&&t.set(e)}),[a,t])]}({groupId:r}),g=(()=>{const e=o??x;return u({value:e,tabValues:t})?e:null})();(0,i.Z)((()=>{g&&c(g)}),[g]);return{selectedValue:l,selectValue:(0,n.useCallback)((e=>{if(!u({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);c(e),m(e),j(e)}),[m,j,t]),tabValues:t}}var j=a(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=a(85893);function v(e){let{className:s,block:a,selectedValue:n,selectValue:l,tabValues:i}=e;const c=[],{blockElementScrollPositionUntilNextRender:o}=(0,t.o5)(),h=e=>{const s=e.currentTarget,a=c.indexOf(s),r=i[a].value;r!==n&&(o(s),l(r))},m=e=>{let s=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;s=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;s=c[a]??c[c.length-1];break}}s?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},s),children:i.map((e=>{let{value:s,label:a,attributes:t}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:n===s?0:-1,"aria-selected":n===s,ref:e=>c.push(e),onKeyDown:m,onClick:h,...t,className:(0,r.Z)("tabs__item",g.tabItem,t?.className,{"tabs__item--active":n===s}),children:a??s},s)}))})}function b(e){let{lazy:s,children:a,selectedValue:r}=e;const t=(Array.isArray(a)?a:[a]).filter(Boolean);if(s){const e=t.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:t.map(((e,s)=>(0,n.cloneElement)(e,{key:s,hidden:e.props.value!==r})))})}function k(e){const s=x(e);return(0,f.jsxs)("div",{className:(0,r.Z)("tabs-container",g.tabList),children:[(0,f.jsx)(v,{...e,...s}),(0,f.jsx)(b,{...e,...s})]})}function N(e){const s=(0,j.Z)();return(0,f.jsx)(k,{...e,children:m(e.children)},String(s))}},11151:(e,s,a)=>{a.d(s,{Z:()=>i,a:()=>l});var n=a(67294);const r={},t=n.createContext(r);function l(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);