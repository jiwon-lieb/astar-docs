"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[4878],{29054:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var s=t(85893),n=t(11151);const i={sidebar_position:1},c="Precompiles",d={id:"build/EVM/precompiles/index",title:"Precompiles",description:"A precompile is a common functionality used in smart contracts that has been compiled in advance, so Ethereum nodes can run it more efficiently. From a contract's perspective, this is a single command like an opcode.",source:"@site/docs/build/EVM/precompiles/index.md",sourceDirName:"build/EVM/precompiles",slug:"/build/EVM/precompiles/",permalink:"/docs/build/EVM/precompiles/",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/build/EVM/precompiles/index.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Privy",permalink:"/docs/build/EVM/developer-tooling/privy"},next:{title:"XCM - xTokens",permalink:"/docs/build/EVM/precompiles/xcm/"}},l={},o=[{value:"Ethereum Native Precompiles",id:"ethereum-native-precompiles",level:2},{value:"Astar Specific Precompiles",id:"astar-specific-precompiles",level:2},{value:"Usage Example",id:"usage-example",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"precompiles",children:"Precompiles"}),"\n",(0,s.jsxs)(r.p,{children:["A precompile is a common functionality used in smart contracts that has been compiled in advance, so Ethereum nodes can run it more efficiently. From a contract's perspective, this is a single command like an opcode.\nThe Frontier EVM used on Astar network provides several useful precompiled contracts. These contracts are implemented in our ecosystem as a native implementation. The precompiled contracts ",(0,s.jsx)(r.code,{children:"0x01"})," through ",(0,s.jsx)(r.code,{children:"0x08"})," are the same as those in Ethereum (see list below). Additionally, Astar implements precompiled contracts starting from ",(0,s.jsx)(r.code,{children:"0x5001"}),", that support new Astar features."]}),"\n",(0,s.jsx)(r.h2,{id:"ethereum-native-precompiles",children:"Ethereum Native Precompiles"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Precompile"}),(0,s.jsx)(r.th,{children:"Address"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"ECRecover"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000001"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Sha256"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000002"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Ripemd160"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000003"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Identity"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000004"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Modexp"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000005"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Bn128Add"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000006"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Bn128Mul"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000007"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Bn128Pairing"}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000000008"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"astar-specific-precompiles",children:"Astar Specific Precompiles"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Precompile"}),(0,s.jsx)(r.th,{children:"Address"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/build/EVM/precompiles/staking",children:"DappsStaking"})}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000005001"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/build/EVM/precompiles/sr25519",children:"Sr25519"})}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000005002"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/build/EVM/precompiles/substrate-ecdsa",children:"SubstrateEcdsa"})}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000005003"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/build/EVM/precompiles/xcm/",children:"XCM"})}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000005004"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/build/EVM/precompiles/xvm",children:"XVM"})}),(0,s.jsx)(r.td,{children:"0x0000000000000000000000000000000000005005"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/build/EVM/precompiles/xc20",children:"assets-erc20"})}),(0,s.jsx)(r.td,{children:"ASSET_PRECOMPILE_ADDRESS_PREFIX"})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:["The interface descriptions for these precompiles can be found in the ",(0,s.jsx)(r.code,{children:"precompiles"})," folder: ",(0,s.jsx)(r.a,{href:"https://github.com/AstarNetwork/Astar/",children:"Astar repo"}),".\nThe Addresses can be checked in the ",(0,s.jsx)(r.a,{href:"https://github.com/AstarNetwork/Astar/tree/master/runtime",children:"Astar repo"})," for each runtime in ",(0,s.jsx)(r.code,{children:"precompile.rs"})," files."]}),"\n",(0,s.jsx)(r.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,s.jsx)(r.p,{children:"Here we'll demonstrate how to interact with the dApp staking precompile using Remix IDE. Other precompiles can be accessed in a similar manner."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:'import "./DappsStaking.sol";\ncontract A {\n    DappsStaking public constant DAPPS_STAKING = DappsStaking(0x0000000000000000000000000000000000005001);\n\n    /// @notice Check current era\n    function checkCurrentEra() public view {\n        uint256 currentEra = DAPPS_STAKING.read_current_era();\n    }\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Example use: check ",(0,s.jsx)(r.code,{children:"current era"})," and ",(0,s.jsx)(r.code,{children:"total staked amount"})," in the ",(0,s.jsx)(r.code,{children:"pallet-dapps-staking"})," for Shiden Network. For this example we will use Remix."]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Copy ",(0,s.jsx)(r.code,{children:"DappsStaking.sol"})," from ",(0,s.jsx)(r.a,{href:"https://github.com/AstarNetwork/Astar/",children:"Astar repo"})," and create new contract in Remix:"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://i.imgur.com/mr0TcLq.png",alt:""})}),"\n",(0,s.jsxs)(r.ol,{start:"2",children:["\n",(0,s.jsx)(r.li,{children:"Compile the dAppStaking contract:"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://i.imgur.com/6Wgg9rf.jpg",alt:""})}),"\n",(0,s.jsxs)(r.ol,{start:"3",children:["\n",(0,s.jsxs)(r.li,{children:["The precompile does not need to be deployed since it is already on the network, but you will need to tell Remix where to find it.\nAfter you connect your EVM wallet to Shiden Network (same applies for Astar Network and for Shibuya Testnet) follow these steps:","\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Open the Deploy tab."}),"\n",(0,s.jsxs)(r.li,{children:["Use injected Web3 environment. It should point to Shiden Mainnet with ",(0,s.jsx)(r.code,{children:"ChainId 336"}),"."]}),"\n",(0,s.jsx)(r.li,{children:"Make sure you have the selected dAppStaking contract."}),"\n",(0,s.jsxs)(r.li,{children:["Provide the address of the precompiled contract ",(0,s.jsx)(r.code,{children:"0x0000000000000000000000000000000000005001"}),"."]}),"\n",(0,s.jsx)(r.li,{children:"The dApp Staking contract will appear under Deployed contracts."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://i.imgur.com/6RnQlkb.jpg",alt:""})}),"\n",(0,s.jsxs)(r.ol,{start:"4",children:["\n",(0,s.jsxs)(r.li,{children:["Interact with the contract.","\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Check the current era."}),"\n",(0,s.jsx)(r.li,{children:"Use the current era as input to check total staked amount on the network."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://user-images.githubusercontent.com/34627453/159696985-19f67e95-807e-4c20-b74c-c9f4944ada32.jpg",alt:"precompile-interact"})})]})}function h(e={}){const{wrapper:r}={...(0,n.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},11151:(e,r,t)=>{t.d(r,{Z:()=>d,a:()=>c});var s=t(67294);const n={},i=s.createContext(n);function c(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);