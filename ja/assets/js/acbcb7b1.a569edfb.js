"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[9736],{27948:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=t(85893),s=t(11151),a=t(74866),i=t(85162);const o={sidebar_position:1},l="Ink! Environment",c={id:"build/environment/ink_environment",title:"Ink! Environment",description:"Overview",source:"@site/docs/build/environment/ink_environment.md",sourceDirName:"build/environment",slug:"/build/environment/ink_environment",permalink:"/ja/docs/build/environment/ink_environment",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/build/environment/ink_environment.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Set up the Development Environment",permalink:"/ja/docs/build/environment/"},next:{title:"Network RPC endpoints",permalink:"/ja/docs/build/environment/endpoints"}},u={},d=[{value:"Overview",id:"overview",level:2},{value:"What is ink!",id:"what-is-ink",level:2},{value:"Ink! Environment Setup",id:"ink-environment-setup",level:2},{value:"Rust and Cargo",id:"rust-and-cargo",level:3},{value:"Ink! CLI",id:"ink-cli",level:3},{value:"Dev container",id:"dev-container",level:2},{value:"References",id:"references",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"ink-environment",children:"Ink! Environment"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This guide is designed for those who are new to ink! or Wasm smart contracts in the Astar ecosystem. Before you begin, ensure your environment supports Rust."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"what-is-ink",children:"What is ink!"}),"\n",(0,r.jsxs)(n.p,{children:["Ink! is a Rust eDSL developed by Parity, that specifically targets smart contract development for Substrate\u2019s ",(0,r.jsx)(n.code,{children:"pallet-contracts"}),". Ink! is not reinventing a programming language, rather, adapting a subset of Rust to serve smart contract developers, specifically. If this isn't reason enough on its own to convince you to learn more about ink!, you can find many more ",(0,r.jsx)(n.a,{href:"https://use.ink/why-rust-for-smart-contracts",children:"here"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["A frequently asked question when discussing Wasm is: Why use WebAssembly for smart contracts in the first place? You can find all the answers ",(0,r.jsx)(n.a,{href:"https://use.ink/why-webassembly-for-smart-contracts",children:"here"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"ink-environment-setup",children:"Ink! Environment Setup"}),"\n",(0,r.jsx)(n.h3,{id:"rust-and-cargo",children:"Rust and Cargo"}),"\n",(0,r.jsxs)(n.p,{children:["Rust and Cargo are prerequisites for compiling Wasm smart contracts. The easiest way to obtain Cargo is by installing the current stable release of\xa0",(0,r.jsx)(n.a,{href:"https://www.rust-lang.org/",children:"Rust"}),"\xa0using\xa0",(0,r.jsx)(n.a,{href:"https://rustup.rs/",children:"rustup"}),". Installing Rust using\xa0",(0,r.jsx)(n.code,{children:"rustup"}),"\xa0will also install\xa0",(0,r.jsx)(n.code,{children:"cargo"}),". On Linux and macOS systems, you can do that with the following:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"curl https://sh.rustup.rs -sSf | sh\n# Configure\nsource ~/.cargo/env\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This will download a script and start the installation. If you are using Windows, visit the ",(0,r.jsx)(n.a,{href:"https://www.rust-lang.org/tools/install",children:"Rust website"})," and follow the instructions to install Rust. Configure source control to pull the latest stable release and add nightly + Wasm target with the following:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rustup default stable\nrustup update\nrustup update nightly\nrustup component add rust-src\nrustup component add rust-src --toolchain nightly\nrustup target add wasm32-unknown-unknown --toolchain nightly\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsxs)(n.p,{children:["Due to a bug in ",(0,r.jsx)(n.code,{children:"cargo-contract"}),", building contracts with ",(0,r.jsx)(n.strong,{children:"rust nightly 1.70.0 or higher will fail"}),".\nIt is advised to use rustc v1.69.0 or older until the issue is resolved from ",(0,r.jsx)(n.code,{children:"cargo-contract"})," side.\nFor better dev experience it is advised to create a ",(0,r.jsx)(n.a,{href:"https://rust-lang.github.io/rustup/overrides.html#the-toolchain-file",children:"rust-toolchain file"}),"\nin the root of your project directory with following values."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[toolchain]\nchannel = "1.69.0"\ncomponents = [ "rustfmt", "rust-src" ]\ntargets = [ "wasm32-unknown-unknown" ]\nprofile = "minimal"\n'})}),(0,r.jsxs)(n.p,{children:["See more ",(0,r.jsx)(n.a,{href:"https://github.com/paritytech/cargo-contract/issues/1058",children:"here"})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"ink-cli",children:["Ink! ",(0,r.jsx)(n.a,{href:"https://use.ink/getting-started/setup#ink-cli",children:"CLI"})]}),"\n",(0,r.jsxs)(n.p,{children:["The first and most important tool we will be installing is\xa0",(0,r.jsx)(n.a,{href:"https://github.com/paritytech/cargo-contract",children:"cargo-contract"}),", a CLI tool for setting up and managing WebAssembly smart contracts written with ink!"]}),"\n",(0,r.jsxs)(n.p,{children:["As a prerequisite using older versions of ink! you may need to install the\xa0",(0,r.jsx)(n.a,{href:"https://github.com/WebAssembly/binaryen",children:"binaryen"}),"\xa0package, used to optimize WebAssembly contract bytecode."]}),"\n",(0,r.jsxs)(n.p,{children:["Many package managers have it preinstalled, for example\xa0",(0,r.jsx)(n.a,{href:"https://tracker.debian.org/pkg/binaryen",children:"Debian/Ubuntu"}),",\xa0",(0,r.jsx)(n.a,{href:"https://formulae.brew.sh/formula/binaryen",children:"Homebrew"}),",\xa0and\xa0",(0,r.jsx)(n.a,{href:"https://archlinux.org/packages/community/x86_64/binaryen/",children:"Arch Linux"}),"."]}),"\n",(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(i.Z,{value:"Debian/Ubuntu",label:"Debian/Ubuntu",default:!0,children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Using ",(0,r.jsx)(n.code,{children:"apt-get"})]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apt-get update\napt-get -y install binaryen\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Using ",(0,r.jsx)(n.code,{children:"apt"})]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apt update\napt -y install binaryen\n"})})]}),(0,r.jsx)(i.Z,{value:"Arch Linux",label:"ArchLinux",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"pacman -S binaryen\n"})})}),(0,r.jsx)(i.Z,{value:"MacOS",label:"MacOS",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"brew install binaryen\n"})})}),(0,r.jsx)(i.Z,{value:"Windows",label:"Windows",default:!0,children:(0,r.jsxs)(n.p,{children:["Find binary releases at ",(0,r.jsx)(n.a,{href:"https://github.com/WebAssembly/binaryen/releases",children:"https://github.com/WebAssembly/binaryen/releases"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"Two other dependencies need to be satisfied to link the ink! contract, for example to warn users about using APIs in a way that could lead to security issues."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"cargo install cargo-dylint dylint-link\n"})}),"\n",(0,r.jsx)(n.p,{children:"After you've installed the package, execute the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"cargo install cargo-contract --force --locked\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"--force"}),"\xa0to ensure you are updated to the most recent\xa0",(0,r.jsx)(n.code,{children:"cargo-contract"}),"\xa0version."]}),"\n",(0,r.jsxs)(n.p,{children:["If you need to install an older version of ",(0,r.jsx)(n.code,{children:"cargo-contract"})," use the following command by adding your desired version:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo install cargo-contract --force --version 1.5.1\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can then use\xa0",(0,r.jsx)(n.code,{children:"cargo contract --help"}),"\xa0to start exploring all available commands."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"dev-container",children:"Dev container"}),"\n",(0,r.jsx)(n.p,{children:"The above process can be automated by utilizing a preinstalled and preconfigured dev container."}),"\n",(0,r.jsxs)(n.p,{children:["Detailed instructions about how to use and configure a dev container can be found on ",(0,r.jsx)(n.a,{href:"https://github.com/AstarNetwork/swanky-dev-container",children:"swanky-dev-container Github"})]}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/paritytech/ink",children:"Ink! Github repo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://paritytech.github.io/ink/",children:"Ink! Intro repo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://use.ink",children:"Ink! Official Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://paritytech.github.io/ink/ink_lang/",children:"Ink! Rust doc"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/AstarNetwork/swanky-dev-container",children:"swanky-dev-container"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>i});t(67294);var r=t(86010);const s={tabItem:"tabItem_Ymn6"};var a=t(85893);function i(e){let{children:n,hidden:t,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,i),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>w});var r=t(67294),s=t(86010),a=t(12466),i=t(16550),o=t(20469),l=t(91980),c=t(67392),u=t(50012);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const s=(0,i.k6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l._X)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(s.location.search);n.set(a,e),s.replace({...s.location,search:n.toString()})}),[a,s])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,a=h(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[c,d]=m({queryString:t,groupId:s}),[b,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,a]=(0,u.Nk)(t);return[s,(0,r.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:s}),f=(()=>{const e=c??b;return p({value:e,tabValues:a})?e:null})();(0,o.Z)((()=>{f&&l(f)}),[f]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),g(e)}),[d,g,a]),tabValues:a}}var g=t(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(85893);function x(e){let{className:n,block:t,selectedValue:r,selectValue:i,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),s=o[t].value;s!==r&&(c(n),i(s))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:d,onClick:u,...a,className:(0,s.Z)("tabs__item",f.tabItem,a?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:s}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=b(e);return(0,v.jsxs)("div",{className:(0,s.Z)("tabs-container",f.tabList),children:[(0,v.jsx)(x,{...e,...n}),(0,v.jsx)(j,{...e,...n})]})}function w(e){const n=(0,g.Z)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(n))}},11151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>i});var r=t(67294);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);