"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[2240],{6165:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var a=n(85893),t=n(11151);const o={sidebar_position:4},i="Snapshots",r={id:"build/nodes/snapshots",title:"Snapshots",description:"Generally speaking, using database snapshots is discouraged, it is a best practice to synchronize database from scratch.",source:"@site/docs/build/nodes/snapshots.md",sourceDirName:"build/nodes",slug:"/build/nodes/snapshots",permalink:"/es/docs/build/nodes/snapshots",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/build/nodes/snapshots.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Run a Full Node",permalink:"/es/docs/build/nodes/full-node"},next:{title:"Node Commands",permalink:"/es/docs/build/nodes/node-commands"}},d={},c=[{value:"Stakecraft snapshots usage",id:"stakecraft-snapshots-usage",level:2},{value:"Relay chain",id:"relay-chain",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{id:"snapshots",children:"Snapshots"}),"\n",(0,a.jsxs)(s.p,{children:["Generally speaking, using database snapshots is discouraged, it is a best practice to synchronize database from scratch.\nIn some particular cases, it may be needed to use a parachain snapshot. Stakecraft is providing archive db snapshots for Astar and Shiden at ",(0,a.jsx)(s.a,{href:"https://snapshots.stakecraft.com/",children:"https://snapshots.stakecraft.com/"}),".\nNote: these are archive snapshots only and they don't work on pruned node."]}),"\n",(0,a.jsx)(s.h2,{id:"stakecraft-snapshots-usage",children:"Stakecraft snapshots usage"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-sh",children:"# remove your Astar database directory in case you already have one\nrm -rf {BASE_PATH}/chains/{CHAIN}/db\n\n# in case you haven't started a node yet, you need to make the following dir\nmkdir -p {BASE_PATH}/chains/{CHAIN}/db/full\n\n# browse the directory\ncd {BASE_PATH}/chains/{CHAIN}/db/full\n\n# download latest snapshot\nwget -O - {STAKECRAFT_WEBSITE_SNAPSHOT} | tar xf -\n\n# pay attention to file ownership if needed\nchown -R astar:astar {BASE_PATH}/chains/{CHAIN}/db/full\n\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Note: ",(0,a.jsx)(s.code,{children:"{BASE_PATH}"})," is the path specified for chain data in the node command"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["The best practice is to set it to ",(0,a.jsx)(s.code,{children:"/var/lib/astar"})]}),"\n",(0,a.jsxs)(s.li,{children:["The default path if you don't specify any is ",(0,a.jsx)(s.code,{children:"~/.local/share/astar-collator"})]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"relay-chain",children:"Relay chain"}),"\n",(0,a.jsx)(s.p,{children:"Since the introduction of warp sync, it is not necessary and discouraged to use a relay chain snapshot.\nThis method downloads finality proofs and state in priority, it allows the relay node to be up with data necessary to the parachain node in less that 15 minutes."}),"\n",(0,a.jsx)(s.p,{children:"To sync the relay chain in warp mode, just add this at the end of the node command:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-sh",children:"-- --sync warp\n"})})]})}function l(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},11151:(e,s,n)=>{n.d(s,{Z:()=>r,a:()=>i});var a=n(67294);const t={},o=a.createContext(t);function i(e){const s=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(o.Provider,{value:s},e.children)}}}]);