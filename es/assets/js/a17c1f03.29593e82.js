"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[1593],{43380:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>l});var i=r(85893),a=r(11151);const o={sidebar_position:4},s="Haciendo los activos ERC20 existentes compatibles entre cadenas",t={id:"learn/interoperability/xcm/building-with-xcm/erc20-cross-chain-compatible",title:"Haciendo los activos ERC20 existentes compatibles entre cadenas",description:"Si deseas hacer que un activo ERC20 existente sea compatible entre cadenas, es bastante simple, siguiendo las instrucciones a continuaci\xf3n",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/learn/interoperability/xcm/building-with-xcm/erc20-cross-chain-compatible.md",sourceDirName:"learn/interoperability/xcm/building-with-xcm",slug:"/learn/interoperability/xcm/building-with-xcm/erc20-cross-chain-compatible",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/erc20-cross-chain-compatible",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/learn/interoperability/xcm/building-with-xcm/erc20-cross-chain-compatible.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Usando activos XC20 en EVM",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/send-xc20-evm"},next:{title:"XC20 en contratos inteligentes",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc20-smart-contracts"}},c={},l=[{value:"Extensi\xf3n XC20+",id:"extensi\xf3n-xc20",level:2},{value:"Tokens envueltos",id:"tokens-envueltos",level:2},{value:"Envolviendo un ERC20 en un XC20",id:"envolviendo-un-erc20-en-un-xc20",level:2},{value:"Procedimiento",id:"procedimiento",level:2},{value:"1. Crear un activo XC20",id:"1-crear-un-activo-xc20",level:3},{value:"2. Desplegar el contrato inteligente xcBurrito.sol",id:"2-desplegar-el-contrato-inteligente-xcburritosol",level:3},{value:"3. Transferir la propiedad del activo XC al contrato inteligente xcBurrito",id:"3-transferir-la-propiedad-del-activo-xc-al-contrato-inteligente-xcburrito",level:3},{value:"Acciones de usuario",id:"acciones-de-usuario",level:2},{value:"Resultado final",id:"resultado-final",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"haciendo-los-activos-erc20-existentes-compatibles-entre-cadenas",children:"Haciendo los activos ERC20 existentes compatibles entre cadenas"}),"\n",(0,i.jsx)(n.p,{children:"Si deseas hacer que un activo ERC20 existente sea compatible entre cadenas, es bastante simple, siguiendo las instrucciones a continuaci\xf3n"}),"\n",(0,i.jsx)(n.h2,{id:"extensi\xf3n-xc20",children:"Extensi\xf3n XC20+"}),"\n",(0,i.jsxs)(n.p,{children:["En resumen, el est\xe1ndar ",(0,i.jsx)(n.strong,{children:"XC20"})," permite que los contratos inteligentes interact\xfaen con activos compatibles entre cadenas, como si fueran activos ERC20 t\xedpicos.\nA diferencia de los activos ERC20 est\xe1ndar implementados dentro del entorno EVM, donde los saldos, emisiones, etc, se almacenan directamente, los activos ",(0,i.jsx)(n.strong,{children:"XC20"})," se asignan a un pallet de Substrate, lo que significa que los desarrolladores no tienen acceso a la misma l\xf3gica inherente al formato ERC20, como ",(0,i.jsx)(n.code,{children:"_mint"})," o ",(0,i.jsx)(n.code,{children:"_burn"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["En general, esto est\xe1 bien para los activos ",(0,i.jsx)(n.strong,{children:"XC20"})," existentes, ya que no deber\xedamos estar creando o quemando estos activos en contratos inteligentes (por ejemplo, no hay una raz\xf3n v\xe1lida para crear DOT interconectados en Astar). Sin embargo, hay casos de uso en los que tener un conjunto extendido de funcionalidades es \xfatil y necesario, como en el caso de tokens envueltos."]}),"\n",(0,i.jsxs)(n.p,{children:["Por esta raz\xf3n, proveemos una interfaz ",(0,i.jsx)(n.strong,{children:"XC20"})," ampliada llamada ",(0,i.jsx)(n.strong,{children:"XC20+"}),". Ofrece los siguientes m\xe9todos:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Solidity",children:"// Usado para comprobar cu\xe1l es el dep\xf3sito existencial del activo XC20\nfunction minimumBalance() external view returns (uint256);\n\n// Usado para mintear nuevos fondos\nfunction mint(address beneficiary, uint256 amount) external returns (bool);\n\n// Usado para quemar fondos\nfunction burn(address who, uint256 amount) external returns (bool);\n"})}),"\n",(0,i.jsx)(n.p,{children:"La lista mencionada anteriormente podr\xeda ampliarse en el futuro."}),"\n",(0,i.jsxs)(n.p,{children:["Ten en cuenta que mintear y quemar requiere ciertos privilegios - lee sobre activos ",(0,i.jsx)(n.strong,{children:"XC20"})," para aprender m\xe1s."]}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.p,{children:["Ten en cuenta que la funci\xf3n ",(0,i.jsx)(n.code,{children:"burn()"})," en ",(0,i.jsx)(n.strong,{children:"XC20+"})," hereda el comportamiento de la funci\xf3n ",(0,i.jsx)(n.code,{children:"burn()"})," de ",(0,i.jsx)(n.code,{children:"pallet-assets"}),". Llamar a la funci\xf3n ",(0,i.jsx)(n.code,{children:"burn()"})," de ",(0,i.jsx)(n.code,{children:"pallet-assets"})," con un monto mayor al saldo actual resultar\xe1 en la quema del monto disponible y devolver\xe1 \xe9xito."]}),(0,i.jsxs)(n.p,{children:["En los contratos, la implementaci\xf3n de ",(0,i.jsx)(n.code,{children:"burn()"})," en ",(0,i.jsx)(n.a,{href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/3214f6c2567f0e7938f481b0a6b5cd2fe3b13cdb/contracts/token/ERC20/ERC20.sol#L283",children:(0,i.jsx)(n.code,{children:"ERC20Burnable.sol"})})," quemar\xe1 el monto si es menor o igual al balance de la cuenta."]})]}),"\n",(0,i.jsx)(n.h2,{id:"tokens-envueltos",children:"Tokens envueltos"}),"\n",(0,i.jsx)(n.p,{children:"Un token envuelto es un token cuyo valor est\xe1 vinculado a una criptomoneda subyacente. Una cantidad del token original se bloquea en una b\xf3veda digital y, a cambio, se permite la creaci\xf3n de una cantidad equivalente de tokens envueltos."}),"\n",(0,i.jsx)(n.p,{children:"Esto es \xfatil por varias razones, por mencionar algunas:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Para ampliar las funcionalidades de un token existente junto con otros m\xf3dulos ERC20."}),"\n",(0,i.jsx)(n.li,{children:"Permitir que una criptomoneda nativa se comporte como una ERC20, por ejemplo, Wrapped Ether (WETH)."}),"\n",(0,i.jsx)(n.li,{children:"Permitir el uso de monedas fuera de su blockchain nativo, por ejemplo, Wrapped bitcoin (WBTC)."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["En el siguiente ejemplo vamos a examinar c\xf3mo envolver a un token ERC20 existente dentro de un ",(0,i.jsx)(n.strong,{children:"XC20"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"envolviendo-un-erc20-en-un-xc20",children:"Envolviendo un ERC20 en un XC20"}),"\n",(0,i.jsxs)(n.p,{children:["En este ejemplo, el token subyacente ser\xe1 un ERC20 existente, llamado BURRITO. Queremos envolver algunos BURRITOs y hacerlos aptos para la cadena cruzada. Utilizar una especificaci\xf3n de token est\xe1ndar ",(0,i.jsx)(n.a,{href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/extensions/ERC20Wrapper.sol",children:"ERC20Wrapper"})," de OpenZeppelin no ser\xe1 suficiente. Por lo tanto, tendremos que sustituir algunas de las funciones ERC20Wrapper y utilizar funciones ",(0,i.jsx)(n.strong,{children:"XC20+"}),".\nVamos a llamar al reci\xe9n token envuelto, xcBURRITO.\nxcBURRITO toma la direcci\xf3n del token subyacente (BURRITO) y la direcci\xf3n del activo reci\xe9n creado como par\xe1metros del constructor. Estableceremos valores para los otros par\xe1metros requeridos, pero observa que tenemos que incluir la llamada al constructor ERC20Permit, porque xcBURRITO es ahora un padre de BURRITO."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Solidity",children:'constructor(IERC20 burrito)\n   ERC20("Wrapped Burrito", "xcBUR")\n   ERC20Permit("Wrapped Burrito")\n   ERC20Wrapper(burrito)\n{}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Dado que no podemos utilizar ERC20Wrapper, lo sustituiremos y utilizaremos la interfaz ",(0,i.jsx)(n.strong,{children:"XC20+"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Solidity",children:'import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Wrapper.sol";\nimport "./Burrito.sol";\n\ncontract XcBurrito is Xc20Plus, ERC20Wrapper, BURITTO{\n    constructor(IERC20 burrito)\n    Xc20Plus("Wrapped Burrito", "xcBUR")\n    ERC20Permit("Wrapped Burrito")\n    ERC20Wrapper(burrito)\n    {}\n\n    function _mint(address _to, uint256 _amount)\n        internal\n        override(ERC20)\n    {\n        // agrega aqu\xed tus hooks pre-mint si es necesario\n\n        require(\n            IERC20Plus(xcBurrito).mint(_to, _amount), "Minting xc token failed"\n        );\n\n        // agrega aqu\xed tus hooks post-mint si es necesario\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"procedimiento",children:"Procedimiento"}),"\n",(0,i.jsx)(n.h3,{id:"1-crear-un-activo-xc20",children:"1. Crear un activo XC20"}),"\n",(0,i.jsxs)(n.p,{children:["Seguir la documentaci\xf3n de c\xf3mo ",(0,i.jsx)(n.a,{href:"/docs/learn/interoperability/xcm/building-with-xcm/create-xc20-assets",children:"crear activos XC20"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"2-desplegar-el-contrato-inteligente-xcburritosol",children:"2. Desplegar el contrato inteligente xcBurrito.sol"}),"\n",(0,i.jsx)(n.p,{children:"Para desplegar el contrato xcBurrito necesitar\xe1s dos par\xe1metros de entrada"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Direcci\xf3n del token ERC20 Burrito (H160)"}),"\n",(0,i.jsxs)(n.li,{children:["Direcci\xf3n del activo ",(0,i.jsx)(n.strong,{children:"XC20"})," (H160)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Seguir las instrucciones sobre c\xf3mo ",(0,i.jsx)(n.a,{href:"/docs/learn/interoperability/xcm/building-with-xcm/create-xc20-assets#calculate-xc20-precompile-address",children:"calcular una direcci\xf3n XC20"}),". Por ejemplo, si el ",(0,i.jsx)(n.code,{children:"asset_id"})," es 17 (=0x11), la direcci\xf3n EVM resultante ser\xe1 ",(0,i.jsx)(n.code,{children:"0xffffffff00000000000000000000000000000011"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-transferir-la-propiedad-del-activo-xc-al-contrato-inteligente-xcburrito",children:"3. Transferir la propiedad del activo XC al contrato inteligente xcBurrito"}),"\n",(0,i.jsxs)(n.p,{children:["Para permitir que el contrato ",(0,i.jsx)(n.strong,{children:"xcBurrito"})," pueda realizar las acciones mintear/quemar, necesitas llamar al extr\xednseco ",(0,i.jsx)(n.code,{children:"setTeam()"})," en el pallet-assets, y configurar el ",(0,i.jsx)(n.code,{children:"issuer"})," y ",(0,i.jsx)(n.code,{children:"admin"})," como ",(0,i.jsx)(n.strong,{children:"xcBurrito"}),". Esto permitir\xe1 al contrato emitir activos envueltos ",(0,i.jsx)(n.strong,{children:"XC20"}),", pero como el contrato EVM tiene 24 bytes (H160), necesitaremos transformar la direcci\xf3n EVM al formato ss58 antes de poder llamar al extr\xednseco.\n",(0,i.jsx)(n.img,{alt:"Establezca el equipo del activo XC20 llamando a setTeam()",src:r(32546).Z+"",width:"2410",height:"1364"})]}),"\n",(0,i.jsxs)(n.p,{children:["Puedes renunciar a la propiedad del ",(0,i.jsx)(n.strong,{children:"XC20"})," llamando al extr\xednseco ",(0,i.jsx)(n.code,{children:"transferOwnership()"})," en el pallet-assets. Ten presente que despu\xe9s de llamar al extr\xednseco, ya no podr\xe1s cambiar los par\xe1metros ",(0,i.jsx)(n.code,{children:"issuer"})," o ",(0,i.jsx)(n.code,{children:"admin"}),", por lo que deber\xe1s asegurarte de que est\xe9n configurados correctamente."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Renuncia a la propiedad de un activo XC20 llamando a transferOwnership()",src:r(36049).Z+"",width:"2410",height:"858"})}),"\n",(0,i.jsxs)(n.p,{children:["Ahora el contrato xcBurrito es capaz de mintear tokens ",(0,i.jsx)(n.strong,{children:"XC20"})," para llamados que posean tokens ERC20 de Burrito."]}),"\n",(0,i.jsx)(n.h2,{id:"acciones-de-usuario",children:"Acciones de usuario"}),"\n",(0,i.jsx)(n.p,{children:"Para convertir tokens Burrito a activos xcBurrito, los usuarios necesitar\xe1n realizar las siguientes acciones."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Autoriza al contrato inteligente xcBurrito para transferir tokens ERC20 Burrito desde el saldo de un usuario al contrato xcBurrito. Como alternativa, se puede utilizar la llamada ",(0,i.jsx)(n.code,{children:"permit()"})," para mejorar la UX."]}),"\n",(0,i.jsxs)(n.li,{children:["El usuario llama a ",(0,i.jsx)(n.code,{children:"depositFor()"})," de xcBurrito para acu\xf1ar nuevos tokens ",(0,i.jsx)(n.strong,{children:"XC20"}),", o ",(0,i.jsx)(n.code,{children:"withdrawTo()"})," para quemar tokens ",(0,i.jsx)(n.strong,{children:"XC20"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Los activos reci\xe9n envueltos pueden transferirse entre cadenas, como cualquier otro activo ",(0,i.jsx)(n.strong,{children:"XC20"})," (para m\xe1s detalles, consulte la documentaci\xf3n de XCM)."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"resultado-final",children:"Resultado final"}),"\n",(0,i.jsxs)(n.p,{children:["El resultado de ",(0,i.jsx)(n.code,{children:"depositFor(user, amount)"})," ser\xe1:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["XcBurrito bloquea una ",(0,i.jsx)(n.code,{children:"cantidad"})," de token ERC20 Burrito."]}),"\n",(0,i.jsxs)(n.li,{children:["El saldo de ERC20 Burrito del usuario disminuye por ",(0,i.jsx)(n.code,{children:"amount"})]}),"\n",(0,i.jsxs)(n.li,{children:["El contrato XcBurrito mintea la misma ",(0,i.jsx)(n.code,{children:"cantidad"})," de activos xcBurrito"]}),"\n",(0,i.jsxs)(n.li,{children:["El saldo del usuario del activo xcBurrito se incrementa por ",(0,i.jsx)(n.code,{children:"amount"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["El resultado de ",(0,i.jsx)(n.code,{children:"withdrawTo(user, amount)"})," ser\xe1:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["El contrato de XcBurrito quema una ",(0,i.jsx)(n.code,{children:"cantidad"})," del activo de XcBurrito"]}),"\n",(0,i.jsxs)(n.li,{children:["El saldo del usuario del activo xcBurrito se reduce por ",(0,i.jsx)(n.code,{children:"amount"})]}),"\n",(0,i.jsxs)(n.li,{children:["El contrato XcBurrito transfiere cierto ",(0,i.jsx)(n.code,{children:"amount"})," de token ERC20 Burrito al usuario"]}),"\n",(0,i.jsxs)(n.li,{children:["El saldo de ERC20 Burrito del usuario se incrementa por ",(0,i.jsx)(n.code,{children:"amount"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},32546:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/erc20-cross-chain-compatible-1-0c1616a1bf6951c072865b52618dc1cf.png"},36049:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/erc20-cross-chain-compatible-2-fb1dbc2fb69f5da493aacdf2ff070fa4.png"},11151:(e,n,r)=>{r.d(n,{Z:()=>t,a:()=>s});var i=r(67294);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);