"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[2748],{27357:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var s=a(85893),r=a(11151);const i={sidebar_position:7},o="Transferir activos reservados",c={id:"learn/interoperability/xcm/building-with-xcm/xc-reserve-transfer",title:"Transferir activos reservados",description:"XCM nos permite transferir activos de una cadena a otra de varias maneras. En este cap\xedtulo examinaremos c\xf3mo utilizar las transferencias de reserva.",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/learn/interoperability/xcm/building-with-xcm/xc-reserve-transfer.md",sourceDirName:"learn/interoperability/xcm/building-with-xcm",slug:"/learn/interoperability/xcm/building-with-xcm/xc-reserve-transfer",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc-reserve-transfer",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/learn/interoperability/xcm/building-with-xcm/xc-reserve-transfer.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Transacciones remotas v\xeda XCM",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc-remote-transact"},next:{title:"Retirar activos",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc-assets-withdraw"}},t={},d=[];function l(e){const n={a:"a",code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"transferir-activos-reservados",children:"Transferir activos reservados"}),"\n",(0,s.jsx)(n.p,{children:"XCM nos permite transferir activos de una cadena a otra de varias maneras. En este cap\xedtulo examinaremos c\xf3mo utilizar las transferencias de reserva."}),"\n",(0,s.jsxs)(n.p,{children:["Supongamos que queremos importar tokens ",(0,s.jsx)(n.code,{children:"SBY"})," de Shibuya como activos envueltos en Shiden, dando como resultado ",(0,s.jsx)(n.code,{children:"wSBY"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"La red Shibuya necesitar\xe1 tener la cuenta soberana de Shiden. Esta cuenta est\xe1 controlada por Shiden y representa todos los fondos que se le env\xedan, desde la cadena remota (Shiden, desde la perspectiva de Shibuya en este ejemplo)."}),"\n",(0,s.jsxs)(n.li,{children:["La red Shiden deber\xe1 crear el activo ",(0,s.jsx)(n.code,{children:"wSBY"})," y configurarlo para que act\xfae como activo de cadena cruzada (XC20)."]}),"\n",(0,s.jsx)(n.li,{children:"Los canales HRMP deben estar habilitados y configurados para que las parachains se comuniquen e intercambien mensajes XCM."}),"\n",(0,s.jsxs)(n.li,{children:["Para pagar el tiempo de ejecuci\xf3n, ",(0,s.jsx)(n.code,{children:"wSBY"})," debe configurarse como activo de pago en Shiden."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Durante la transferencia ocurrir\xe1 lo siguiente:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Se mueve una cantidad de ",(0,s.jsx)(n.code,{children:"SBY"})," de la cuenta de origen a la cuenta soberana de Shiden en Shibuya."]}),"\n",(0,s.jsxs)(n.li,{children:["Se env\xeda a Shiden un mensaje XCM que contiene la instrucci\xf3n ",(0,s.jsx)(n.code,{children:"ReserveTransferAssets"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["La instrucci\xf3n ",(0,s.jsx)(n.code,{children:"ReserveTransferAssets"})," es procesada por la paleta ",(0,s.jsx)(n.code,{children:"assets"})," en Shiden, y la cantidad correspondiente de ",(0,s.jsx)(n.code,{children:"wSBY"})," es acu\xf1ada en Shiden."]}),"\n",(0,s.jsxs)(n.li,{children:["Las fichas ",(0,s.jsx)(n.code,{children:"wSBY"})," minteadas se depositan en la cuenta de destino."]}),"\n",(0,s.jsxs)(n.li,{children:["Se cobra una peque\xf1a cantidad de ",(0,s.jsx)(n.code,{children:"wSBY"})," de la cuenta de destino como pago por el tiempo de ejecuci\xf3n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Nota:"})," El ejemplo anterior es espec\xedfico de la implementaci\xf3n de dos parachains concretas. XCM no dicta ni impone ninguna restricci\xf3n sobre c\xf3mo interpretar los mensajes entrantes o c\xf3mo gestionar los activos derivados. Otras parachains pueden, o no, utilizar la paleta ",(0,s.jsx)(n.code,{children:"assets"}),"; la \xfanica suposici\xf3n es que ",(0,s.jsx)(n.code,{children:"assets_reserve_transfer"})," formar\xe1 un mensaje XCM con un origen especificado por su ",(0,s.jsx)(n.code,{children:"parachain_id"}),". Todo lo dem\xe1s depende de la cadena remota y su l\xf3gica, y no habr\xe1 reintentos en caso de fallo."]}),"\n",(0,s.jsx)(n.h1,{id:"precompilados-evm",children:"Precompilados EVM"}),"\n",(0,s.jsxs)(n.p,{children:["Esta funcionalidad se expone a los contratos inteligentes EVM a trav\xe9s de precompilaciones. La interfaz se puede conseguir ",(0,s.jsx)(n.a,{href:"https://github.com/AstarNetwork/Astar",children:"aqu\xed"})," debajo de precompilados XCM."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"    function assets_reserve_transfer(\n        address[] calldata asset_id,\n        uint256[] calldata asset_amount,\n        bytes32   recipient_account_id,\n        bool      is_relay,\n        uint256   parachain_id,\n        uint256   fee_index\n    ) external payable returns (bool);\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"asset_id"})," - Una lista de activos a transferir; para transferir activos nativos, v\xe9ase la siguiente secci\xf3n."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"asset_amount"})," - El monto correspondiente de activos."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"recipient_account_id"})," - El account id del destinatario en la cadena de destino (o en una Relay Chain)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_relay"})," Es verdadero si la cuenta de destino est\xe1 en la Relay Chain."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"parachain_id"})," - El id de la parachain de destino."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fee_index"})," - Qu\xe9 activo de ",(0,s.jsx)(n.code,{children:"asset_id"})," se utiliza para pagar el gas de XCM."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Nota:"})," existe otra versi\xf3n de ",(0,s.jsx)(n.code,{children:"assets_reserve_transfer"})," precompilada que acepta ",(0,s.jsx)(n.code,{children:"address"})," en lugar de ",(0,s.jsx)(n.code,{children:"bytes32"})," para el ",(0,s.jsx)(n.code,{children:"recipient_account_id"}),"."]}),"\n",(0,s.jsx)(n.h1,{id:"transfiriendo-activos-nativos",children:"Transfiriendo activos nativos"}),"\n",(0,s.jsxs)(n.p,{children:["La actual API identifica los activos que se est\xe1n transfiriendo especificando una direcci\xf3n de estilo H160 (XC20). Esto nos impide enviar tokens nativos ya que no hay representaci\xf3n para ello. Sin embargo, hay una soluci\xf3n que utiliza una direcci\xf3n H160 especial, acolchada con ceros ",(0,s.jsx)(n.code,{children:"0x0000000000000000000000000000000000000000"})," y por convenci\xf3n, se interpreta como un comando para enviar el token nativo (",(0,s.jsx)(n.code,{children:"MultiLocation { parents: 0, interior: Here }"}),")."]}),"\n",(0,s.jsx)(n.p,{children:"Por ejemplo, una llamada EVM como:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'reserve_transfer:\n    asset_id = [ "0x00...0" ]\n    asset_amount = [ "333333333" ]\n    ...\n    fee_index = 0\n'})}),"\n",(0,s.jsx)(n.p,{children:"Los internos de precompilaci\xf3n transformar\xe1n los argumentos de llamada en algo como esto:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"assets = [{ parents: 0, interior: Here }]\nasset_amounts = [ 333333333 ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Los activos nativos se pueden utilizar para pagar comisiones de transacci\xf3n como cualquier otro activo. En ese caso, el ",(0,s.jsx)(n.code,{children:"fee_index"})," deber\xeda apuntar a la entrada ",(0,s.jsx)(n.code,{children:"asset_id"})," que contiene ",(0,s.jsx)(n.code,{children:"0x00...0"}),"."]}),"\n",(0,s.jsx)(n.h1,{id:"tarifas-de-transacci\xf3n",children:"Tarifas de transacci\xf3n"}),"\n",(0,s.jsx)(n.p,{children:"Cada transacci\xf3n debe ser pagada. Este mecanismo se implementa para prevenir las inundaciones de transacciones por desviar el uso indebido de la red, s\xf3lo aquellas fichas que tengan valor real pueden ser utilizadas para pagar los honorarios de ejecuci\xf3n."}),"\n",(0,s.jsx)(n.p,{children:"Com\xfanmente, pagaremos por las transacciones usando el token nativo de la red, y se espera que su emisi\xf3n est\xe9 controlada y no cause problemas, Sin embargo, en algunos casos puede ser necesario permitir que los usuarios paguen por las transacciones, utilizando \xfanicamente activos extranjeros."}),"\n",(0,s.jsx)(n.p,{children:"Para lograrlo, la cadena remota debe configurarse para permitir el pago de la ejecuci\xf3n de XCM, en ese activo en particular."})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},11151:(e,n,a)=>{a.d(n,{Z:()=>c,a:()=>o});var s=a(67294);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);