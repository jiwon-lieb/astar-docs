"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[7062],{11516:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var i=n(85893),s=n(11151);const r={sidebar_position:6},c="Transacciones remotas v\xeda XCM",d={id:"learn/interoperability/xcm/building-with-xcm/xc-remote-transact",title:"Transacciones remotas v\xeda XCM",description:"Resumen de funci\xf3n",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/learn/interoperability/xcm/building-with-xcm/xc-remote-transact.md",sourceDirName:"learn/interoperability/xcm/building-with-xcm",slug:"/learn/interoperability/xcm/building-with-xcm/xc-remote-transact",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc-remote-transact",draft:!1,unlisted:!1,editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/learn/interoperability/xcm/building-with-xcm/xc-remote-transact.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"XC20 en contratos inteligentes",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc20-smart-contracts"},next:{title:"Transferir activos reservados",permalink:"/es/docs/learn/interoperability/xcm/building-with-xcm/xc-reserve-transfer"}},o={},l=[{value:"Resumen de funci\xf3n",id:"resumen-de-funci\xf3n",level:2},{value:"Transacciones de forma remota en Astar/Shiden/Shibuya",id:"transacciones-de-forma-remota-en-astarshidenshibuya",level:2},{value:"Secuencia XCM",id:"secuencia-xcm",level:3},{value:"DescendOrigin",id:"descendorigin",level:4},{value:"WithdrawAsset",id:"withdrawasset",level:4},{value:"BuyExecution",id:"buyexecution",level:4},{value:"Transact",id:"transact",level:4},{value:"Cuentas remotas derivadas",id:"cuentas-remotas-derivadas",level:2},{value:"Transacci\xf3n remota a trav\xe9s de Contratos Inteligentes EVM",id:"transacci\xf3n-remota-a-trav\xe9s-de-contratos-inteligentes-evm",level:2},{value:"Secuencia XCM",id:"secuencia-xcm-1",level:3},{value:"Direcci\xf3n del contrato derivado remotamente",id:"direcci\xf3n-del-contrato-derivado-remotamente",level:3},{value:"API precompilados",id:"api-precompilados",level:3},{value:"Activo de pago",id:"activo-de-pago",level:3},{value:"Peso de Transacci\xf3n",id:"peso-de-transacci\xf3n",level:3},{value:"Valores calculados",id:"valores-calculados",level:3}];function t(e){const a={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.h1,{id:"transacciones-remotas-v\xeda-xcm",children:"Transacciones remotas v\xeda XCM"}),"\n",(0,i.jsx)(a.h2,{id:"resumen-de-funci\xf3n",children:"Resumen de funci\xf3n"}),"\n",(0,i.jsxs)(a.p,{children:["La instrucci\xf3n XCM ",(0,i.jsx)(a.code,{children:"Transact"})," permite al emisor ejecutar llamadas arbitrarias en la cadena de destino. Esta funci\xf3n es extremadamente \xfatil ya que nos permite controlar una cuenta en una cadena remota."]}),"\n",(0,i.jsxs)(a.p,{children:["Por ejemplo, un usuario puede enviar una instrucci\xf3n ",(0,i.jsx)(a.code,{children:"Transact"})," desde ",(0,i.jsx)(a.strong,{children:"Astar"})," a ",(0,i.jsx)(a.strong,{children:"Polkadot"})," que transferir\xe1 ",(0,i.jsx)(a.code,{children:"DOT"})," desde la cuenta derivada del usuario en ",(0,i.jsx)(a.strong,{children:"Polkadot"})," a una cuenta receptora arbitraria en ",(0,i.jsx)(a.strong,{children:"Polkadot"}),". El usuario no necesita interactuar directamente con la cadena ",(0,i.jsx)(a.strong,{children:"Polkadot"})," en este caso, pero sin embargo es capaz de cambiar su estado. Es importante se\xf1alar que esto es s\xf3lo un ejemplo - cualquier llamada que pueda ser interpretada por la cadena remota (destino) es capaz de ser enviada y ejecutada."]}),"\n",(0,i.jsx)(a.p,{children:"Esto es especialmente \xfatil para los contratos inteligentes, ya que les permite integrar l\xf3gica personalizada para la interoperabilidad entre cadenas."}),"\n",(0,i.jsx)(a.p,{children:"Es importante entender la diferencia entre enviar una secuencia de instrucciones XCM y recibirla/interpretarla."}),"\n",(0,i.jsxs)(a.p,{children:["El env\xedo de una transacci\xf3n XCM desde ",(0,i.jsx)(a.code,{children:"Astar"})," o ",(0,i.jsx)(a.code,{children:"Shiden"})," a una cadena remota puede tener \xe9xito en el lado emisor, pero no ejecutarse en el destino, y lo mismo ocurre en el caso contrario. Esto puede ocurrir por m\xfaltiples razones - la secuencia XCM puede ser incorrecta, la cadena remota no sabe c\xf3mo interpretar la ",(0,i.jsx)(a.code,{children:"call"})," proporcionada, o la cadena remota no permite la ejecuci\xf3n remota, en absoluto."]}),"\n",(0,i.jsx)(a.p,{children:"El desarrollador o usuario debe asegurarse de que la cadena de destino soporta la llamada codificada y las transacciones remotas, en general."}),"\n",(0,i.jsx)(a.h2,{id:"transacciones-de-forma-remota-en-astarshidenshibuya",children:"Transacciones de forma remota en Astar/Shiden/Shibuya"}),"\n",(0,i.jsx)(a.h3,{id:"secuencia-xcm",children:"Secuencia XCM"}),"\n",(0,i.jsxs)(a.p,{children:["Por el momento, la ejecuci\xf3n remota desde or\xedgenes distintos de las cuentas de parachain s\xf3lo se permite que sea iniciada por el tiempo de ejecuci\xf3n ",(0,i.jsx)(a.code,{children:"Shibuya"})," (incluyendo RocStar) y el tiempo de ejecuci\xf3n ",(0,i.jsx)(a.code,{children:"Shiden"}),"."]}),"\n",(0,i.jsx)(a.p,{children:"Por lo tanto, una secuencia permisible de instrucciones tendr\xe1 que empezar como:"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"DescendOrigin"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"WithdrawAsset"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"BuyExecution"})}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"Transact"})," or ",(0,i.jsx)(a.code,{children:"SetAppendix"})," o ",(0,i.jsx)(a.em,{children:"cualquiera que quiera el usuario"})]}),"\n"]}),"\n",(0,i.jsxs)(a.p,{children:["Esta secuencia XCM, utilizada como prefijo, puede ir seguida de instrucciones arbitrarias, por ejemplo: ",(0,i.jsx)(a.code,{children:"Transact"}),".\nAunque no podemos garantizarlo, lo m\xe1s probable es que otras cadenas adopten el mismo prefijo o uno similar para las secuencias de instrucciones XCM."]}),"\n",(0,i.jsx)(a.h4,{id:"descendorigin",children:"DescendOrigin"}),"\n",(0,i.jsxs)(a.p,{children:["El par\xe1metro DescendOrigin garantiza que el origen no sea una parachain, sino una uni\xf3n m\xe1s compleja como ",(0,i.jsx)(a.code,{children:"{ parachain: 2006, accountId: 0x123aff....ff }"}),". Si esto se omite, todas las llamadas ser\xe1n ejecutadas como si fueran enviadas desde la cuenta soberana del ",(0,i.jsx)(a.em,{children:"root-only"})," parachain, lo cual no permitimos."]}),"\n",(0,i.jsx)(a.h4,{id:"withdrawasset",children:"WithdrawAsset"}),"\n",(0,i.jsx)(a.p,{children:"Retira activos en la cadena de destino de la cuenta derivada del remitente. La cuenta debe tener el activo especificado y el importe solicitado; de lo contrario, la instrucci\xf3n fallar\xe1. Estos activos se utilizan para pagar el tiempo de ejecuci\xf3n del XCM."}),"\n",(0,i.jsx)(a.h4,{id:"buyexecution",children:"BuyExecution"}),"\n",(0,i.jsx)(a.p,{children:"Compra tiempo de ejecuci\xf3n XCM, utilizando los activos retirados."}),"\n",(0,i.jsx)(a.h4,{id:"transact",children:"Transact"}),"\n",(0,i.jsx)(a.p,{children:"Ejecuta los datos de llamada codificados especificados, sin consumir m\xe1s peso del especificado.\nLos datos de llamada pueden ser pr\xe1cticamente cualquier cosa soportada por la cadena remota - no importa lo que soporte la cadena de origen."}),"\n",(0,i.jsx)(a.h2,{id:"cuentas-remotas-derivadas",children:"Cuentas remotas derivadas"}),"\n",(0,i.jsx)(a.p,{children:"Al ejecutar una transacci\xf3n remota, la cadena remota obtendr\xe1 una nueva direcci\xf3n basada en la multilocalizaci\xf3n del remitente.\nLa forma en que se obtiene esta direcci\xf3n viene determinada por la propia cadena, por lo que esta documentaci\xf3n no puede garantizar c\xf3mo funciona cualquier otra cadena que no sean las cadenas basadas en Astar."}),"\n",(0,i.jsxs)(a.p,{children:["Para los tiempos de ejecuci\xf3n basados en Astar, se utiliza un enfoque generalizado, alineado con ",(0,i.jsx)(a.code,{children:"Polkadot"})," y ",(0,i.jsx)(a.code,{children:"Kusama"}),".\nLa multilocalizaci\xf3n se codifica paso a paso con SCALE, hasta que finalmente se hashea utilizando el ",(0,i.jsx)(a.code,{children:"Blake2_256"}),", siendo la salida la direcci\xf3n derivada."]}),"\n",(0,i.jsxs)(a.table,{children:[(0,i.jsx)(a.thead,{children:(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.th,{children:"Nombre"}),(0,i.jsx)(a.th,{children:"Valor"})]})}),(0,i.jsxs)(a.tbody,{children:[(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Cuenta de Alice en Polkadot"}),(0,i.jsx)(a.td,{children:"15oF4uVJwmo4TdGW7VfQxNLavjCXviqxT9S1MgbjMNHr6Sp5"})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Public Key de Alice"}),(0,i.jsx)(a.td,{children:"0xd43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d"})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Multilocalicaci\xf3n de Alice en Astar"}),(0,i.jsx)(a.td,{children:"{ parents: 1, interior: AccountId32 {network: NetworkId::Polkadot, id: 0xd4359...a27d } }"})]})]})]}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsxs)(a.p,{children:["Por ejemplo, supongamos que ",(0,i.jsx)(a.code,{children:"Alice"})," est\xe1 enviando una secuencia XCM desde ",(0,i.jsx)(a.code,{children:"AssetHub"})," a ",(0,i.jsx)(a.code,{children:"Astar"}),".\nLa cuenta de parachain hermana se deriva con un enfoque simple:"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.code,{children:'blake2_256(("SiblingChain", compact_parachain_id, b"AccountId32", public_key).encode())'})}),"\n",(0,i.jsxs)(a.table,{children:[(0,i.jsx)(a.thead,{children:(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.th,{children:"Nombre"}),(0,i.jsx)(a.th,{children:"Valor"})]})}),(0,i.jsxs)(a.tbody,{children:[(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Multilocalicaci\xf3n de Alice en Astar"}),(0,i.jsx)(a.td,{children:"{ parents: 1, interior: X2(Parachain(1000), AccountId32 {network: NetworkId::Polkadot, id: 0xd4359...a27d }) }"})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Cuenta derivada de Alice"}),(0,i.jsx)(a.td,{children:"0x88275533b5d43292c86d05985c3a6e226fee2baeddb4f3b90e30a70bec4d7bff"})]})]})]}),"\n",(0,i.jsxs)(a.p,{children:["Del mismo modo, en caso de que ",(0,i.jsx)(a.code,{children:"Alice"})," est\xe9 enviando XCM desde una cadena que utiliza el formato de direcci\xf3n ",(0,i.jsx)(a.strong,{children:"H160"}),":"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.code,{children:'blake2_256(("SiblingChain", compact_parachain_id, b"AccountKey20", public_key).encode())'})}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsxs)(a.p,{children:["En caso de que ",(0,i.jsx)(a.code,{children:"Alice"})," est\xe9 enviando XCM desde ",(0,i.jsx)(a.code,{children:"Polkadot"}),", los datos codificados cambian un poco y ser\xedan as\xed:"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.code,{children:'blake2_256((b"ParentChain", b"AccountId32", public key).encode())'})}),"\n",(0,i.jsxs)(a.table,{children:[(0,i.jsx)(a.thead,{children:(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.th,{children:"Nombre"}),(0,i.jsx)(a.th,{children:"Valor"})]})}),(0,i.jsxs)(a.tbody,{children:[(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Multilocalicaci\xf3n de Alice en Astar"}),(0,i.jsx)(a.td,{children:"{ parents: 1, interior: X1(AccountId32 {network: NetworkId::Polkadot, id: 0xd4359...a27d }) }"})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Cuenta derivada de Alice"}),(0,i.jsx)(a.td,{children:"0x7dcb1027ecb97011ebe79ca233def50d1f216eb05d76367c8984f67ccc5d2dd1"})]})]})]}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsxs)(a.p,{children:["Puede utilizar el binario ",(0,i.jsx)(a.code,{children:"xcm-tools"})," para generar la direcci\xf3n derivada, basado en sus necesidades."]}),"\n",(0,i.jsx)(a.h2,{id:"transacci\xf3n-remota-a-trav\xe9s-de-contratos-inteligentes-evm",children:"Transacci\xf3n remota a trav\xe9s de Contratos Inteligentes EVM"}),"\n",(0,i.jsxs)(a.p,{children:["Astar permite a los contratos inteligentes de EVM enviar instrucciones de ",(0,i.jsx)(a.code,{children:"Transact"})," a cadenas remotas, d\xe1ndoles la capacidad de ejecutar llamadas arbitrarias."]}),"\n",(0,i.jsx)(a.h3,{id:"secuencia-xcm-1",children:"Secuencia XCM"}),"\n",(0,i.jsxs)(a.p,{children:["Para simplificar la API a trav\xe9s de la cual los contratos inteligentes EVM env\xedan la instrucci\xf3n ",(0,i.jsx)(a.code,{children:"Transact"}),", y para garantizar la seguridad, exponemos una funci\xf3n que construye una secuencia como:"]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"DescendOrigin"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"WithdrawAsset"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"BuyExecution"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.code,{children:"Transact"})}),"\n"]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.code,{children:"DescendOrigin"})," se asegurar\xe1 de que el origen se establece correctamente para que sea la direcci\xf3n ss58 derivada del contrato inteligente."]}),"\n",(0,i.jsxs)(a.p,{children:["Por el momento, ",(0,i.jsx)(a.code,{children:"WithdrawAsset"})," requiere que la representaci\xf3n de los activos est\xe9 presente en nuestros tiempos de ejecuci\xf3n. Sin embargo, se espera que la direcci\xf3n derivada de la cadena remota se financie para que pueda pagar la ejecuci\xf3n de XCM."]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.code,{children:"BuyExecution"})," utilizar\xe1 los activos retirados previamente. El ",(0,i.jsx)(a.code,{children:"weight_limit"})," se establecer\xe1 en ",(0,i.jsx)(a.code,{children:"Unlimited"}),". Esto no es demasiado importante para la secuencia de instrucciones que se utiliza, ya que el usuario controla el peso m\xe1ximo permitido a trav\xe9s de la cantidad de activos retirados. Sin embargo, los fondos deben ser suficientes para pagar tanto la ejecuci\xf3n de la secuencia XCM, como la llamada remota codificada."]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.code,{children:"Transact"})," ejecutar\xe1 la llamada codificada. El ",(0,i.jsx)(a.code,{children:"origin_type"})," se establece en ",(0,i.jsx)(a.code,{children:"SovereignAccount"})," y no puede ser cambiado por el usuario final."]}),"\n",(0,i.jsx)(a.p,{children:"No hay reembolsos al final de la secuencia. El peso no utilizado ser\xe1 gestionado por la cadena remota."}),"\n",(0,i.jsx)(a.h3,{id:"direcci\xf3n-del-contrato-derivado-remotamente",children:"Direcci\xf3n del contrato derivado remotamente"}),"\n",(0,i.jsxs)(a.p,{children:["Por ejemplo, supongamos que tienes un contrato desplegado en Shibuya y est\xe1s llamando al precompilador XCM ",(0,i.jsx)(a.code,{children:"remote_transact"})," con la intenci\xf3n de enviar una secuencia XCM a un parachain hermana. Este parachain hermana utiliza la misma derivaci\xf3n de direcci\xf3n que nuestros tiempos de ejecuci\xf3n. La ruta de derivaci\xf3n de direcci\xf3n se ver\xe1 as\xed:"]}),"\n",(0,i.jsxs)(a.table,{children:[(0,i.jsx)(a.thead,{children:(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.th,{children:"Nombre"}),(0,i.jsx)(a.th,{children:"Direcci\xf3n"})]})}),(0,i.jsxs)(a.tbody,{children:[(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Direcci\xf3n H160 del contrato"}),(0,i.jsx)(a.td,{children:(0,i.jsx)(a.code,{children:"0x48DD0a20a199f96B56eCE7e994D83614A148aA63"})})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Direcci\xf3n SS58 derivada del contrato"}),(0,i.jsx)(a.td,{children:(0,i.jsx)(a.code,{children:"agn53DdEuRgQsvgxqj5M1AecxB6LpbXT7T1R1hjVcoEBR6M"})})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Clave p\xfablica de direcci\xf3n SS58"}),(0,i.jsx)(a.td,{children:(0,i.jsx)(a.code,{children:"0xd219fe1b02545c7dd7e718b1530b4e32b23288351f61e5975c7dc49b004ff119"})})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Multiubicaci\xf3n de la llamada"}),(0,i.jsx)(a.td,{children:(0,i.jsx)(a.code,{children:"{ parents: 1, interior: X2 ( Parachain(2000), AccountId32 {network: NetworkId::Any, id: 0xd219f...f119 } ) }"})})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Cuentas remotas derivadas"}),(0,i.jsx)(a.td,{children:(0,i.jsx)(a.code,{children:"5FrhDFydxUwbWyXT1XDBhRUUYpQtiJJ6skB6n2XV4NubC9fP"})})]})]})]}),"\n",(0,i.jsx)(a.admonition,{type:"note",children:(0,i.jsx)(a.p,{children:"El esquema de derivaci\xf3n de direcciones remotas ha cambiado despu\xe9s de escribir el ejemplo inicial, pero por lo dem\xe1s todo el proceso sigue siendo v\xe1lido y correcto."})}),"\n",(0,i.jsxs)(a.p,{children:["Esto significa que las instrucciones como ",(0,i.jsx)(a.code,{children:"WithdrawAsset"})," y ",(0,i.jsx)(a.code,{children:"Transact"})," se ejecutar\xe1n como si el origen fuera la direcci\xf3n ",(0,i.jsx)(a.code,{children:"5FrhDFydxUwbWyXT1XDBhRUUYpQtiJJ6skB6n2XV4NubC9fP"}),"."]}),"\n",(0,i.jsx)(a.h3,{id:"api-precompilados",children:"API precompilados"}),"\n",(0,i.jsxs)(a.p,{children:["`Esta funcionalidad se expone a los contratos inteligentes EVM a trav\xe9s de precompilaciones. La interfaz se puede conseguir ",(0,i.jsx)(a.a,{href:"https://github.com/AstarNetwork/Astar",children:"aqu\xed"})," debajo de precompilados XCM."]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-solidity",children:"    function remote_transact(\n    Multilocation memory destination,\n    address payment_asset_id,\n    uint256 payment_amount,\n    bytes calldata call,\n    WeightV2 memory transact_weight\n) external returns (bool);\n"})}),"\n",(0,i.jsxs)(a.p,{children:["El ",(0,i.jsx)(a.code,{children:"destino"})," es la Multilocalizaci\xf3n de la cadena de destino y puede ser un ",(0,i.jsx)(a.code,{children:"Id"})," de parachain hermana o la Relay Chain (en cuyo caso se ignora el ",(0,i.jsx)(a.code,{children:"Id"})," de parachain).",(0,i.jsx)(a.br,{}),"\n",(0,i.jsx)(a.code,{children:"payment asset Id & amount"})," - Determina qu\xe9 activo retirar en la cadena de destino y cu\xe1nto. Utilizado para pagar el tiempo de ejecuci\xf3n. La limitaci\xf3n actual es que el activo utilizado debe tener una derivada local ya que est\xe1 referenciado a trav\xe9s de la direcci\xf3n H160.",(0,i.jsx)(a.br,{}),"\n",(0,i.jsx)(a.code,{children:"call"})," - La llamada codificada a ser ejecutada en la cadena remota.",(0,i.jsx)(a.br,{}),"\n",(0,i.jsx)(a.code,{children:"transact_weight"})," - El peso m\xe1ximo que puede consumirse por la ejecuci\xf3n de la llamada en la cadena remota."]}),"\n",(0,i.jsx)(a.p,{children:"Contin\xfae leyendo a continuaci\xf3n para comprender mejor c\xf3mo calcular estos par\xe1metros."}),"\n",(0,i.jsx)(a.h3,{id:"activo-de-pago",children:"Activo de pago"}),"\n",(0,i.jsxs)(a.p,{children:["Por el momento, los usuarios s\xf3lo pueden especificar el activo paymet a trav\xe9s de una direcci\xf3n ",(0,i.jsx)(a.code,{children:"H160"}),". Aunque el activo de pago haga referencia a un activo de la cadena de destino, el activo remoto debe tener un derivado local. Esto se actualizar\xe1 y mejorar\xe1 en el futuro para que los usuarios puedan especificar directamente las multilocalizaciones de activos."]}),"\n",(0,i.jsxs)(a.p,{children:["En caso de que el usuario desee pagar utilizando un derivado de moneda local (ASTR envuelto o SDN) en la cadena de destino, deber\xe1 utilizarse una direcci\xf3n H160 especializada rellenada con ceros, ",(0,i.jsx)(a.code,{children:"0x0000000000000000000000000000000000000000"}),"."]}),"\n",(0,i.jsx)(a.h3,{id:"peso-de-transacci\xf3n",children:"Peso de Transacci\xf3n"}),"\n",(0,i.jsxs)(a.p,{children:["Especificar la cantidad correcta de activos con los que retirar y comprar tiempo de ejecuci\xf3n, as\xed como elegir el peso correcto de la transacci\xf3n, puede ser complicado. Estos par\xe1metros no est\xe1n controlados por los tiempos de ejecuci\xf3n ",(0,i.jsx)(a.code,{children:"Astar"})," o ",(0,i.jsx)(a.code,{children:"Shiden"}),", sino por el tiempo de ejecuci\xf3n de la cadena de destino. Hay algunos puntos y consejos que pueden ayudar al usuario a calcular los valores correctos."]}),"\n",(0,i.jsx)(a.p,{children:"El activo requerido para el pago se utiliza para dos ejecuciones distintas:"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:["Instrucciones XCM - Hay 4 instrucciones XCM en la secuencia, y cada una es ponderada por la cadena de destino para determinar cu\xe1nto debe pagarse por su ejecuci\xf3n. Por el momento, la mayor\xeda de las parachains (y Relay Chains) tienen el peso de la instrucci\xf3n XCM configurado con ",(0,i.jsx)(a.code,{children:"1_000_000_000"})," unidades de peso."]}),"\n",(0,i.jsx)(a.li,{children:"Peso de llamada - El peso de la llamada en la cadena remota."}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"El monto del activo retirado debe, por lo tanto, cubrir unidades de peso `4_000_000_000 + peso(llamada)."}),"\n",(0,i.jsxs)(a.p,{children:["El peso de la llamada est\xe1 determinado por el tiempo de ejecuci\xf3n de la cadena de destino, as\xed que no est\xe1 controlado por ",(0,i.jsx)(a.code,{children:"Astar"})," o ",(0,i.jsx)(a.code,{children:"Shiden"}),". Los usuarios deber\xedan estar seguros de que la llamada remota es correcta en la cadena de destino, antes de enviarla a trav\xe9s de XCM."]}),"\n",(0,i.jsx)(a.p,{children:"Tenga en cuenta que estos valores pueden cambiar - si un tiempo de ejecuci\xf3n de destino se actualiza o reconfigura, los valores pueden cambiar y usted tendr\xe1 que ajustarlos en su contrato inteligente."}),"\n",(0,i.jsx)(a.h3,{id:"valores-calculados",children:"Valores calculados"}),"\n",(0,i.jsx)(a.p,{children:"Astar no puede garantizar que el siguiente enfoque funcione en todas las parachains, ya que cada una de ellas puede ser personalizada independientemente. Pero en general, todos las parachains deben tener acceso a estos m\xe9todos."}),"\n",(0,i.jsxs)(a.p,{children:["Supongamos para este ejemplo que estamos en alguna otra cadena, y queremos ejecutar una transacci\xf3n de forma remota en ",(0,i.jsx)(a.code,{children:"Astar"}),"."]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Paso 1"})," Visita la red ",(0,i.jsx)(a.code,{children:"Astar"})," en ",(0,i.jsx)(a.em,{children:"polkadot-js"})," y localiza el extr\xednseco que le gustar\xeda ejecutar. Para simplificar, vamos a suponer que es ",(0,i.jsx)(a.code,{children:"dappsStaking->claimStaker"}),", aunque podr\xeda ser cualquier llamada. Completa todos los campos. Luego copia los datos de llamada codificados (haz clic en el icono de copia)."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"1-encoded-call",src:n(68708).Z+"",width:"1749",height:"502"})}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Paso 2"})," Ve a Desarrollador > Llamadas Runtime y selecciona ",(0,i.jsx)(a.code,{children:"transactionPaymentCallApi -> queryCallInfo"})," y pausa los datos de llamadas codificados en el campo ",(0,i.jsx)(a.code,{children:"call"}),". Luego haga clic en ",(0,i.jsx)(a.code,{children:"Enviar llamada Runtime"}),"."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"2-sign-no-submit",src:n(35995).Z+"",width:"1752",height:"525"})}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Paso 3"})," Requiere un poco de trabajo. Necesitamos saber cu\xe1nto cuesta ejecutar una instrucci\xf3n XCM ",(0,i.jsx)(a.strong,{children:"\xfanica"})," en la cadena de destino. Para ",(0,i.jsx)(a.code,{children:"Astar"})," y ",(0,i.jsx)(a.code,{children:"Shiden"})," son ",(0,i.jsx)(a.code,{children:"1_000_000_000"})," unidades de ref_time por instrucci\xf3n. Esto puede ser usado como una gu\xeda \xe1spera, pero no hay garant\xeda de que para otras parachains ser\xe1n los mismos, los usuarios deben asegurarse de que prueban este valor ellos mismos, o p\xf3ngase en contacto con el equipo de la parachain para aprender el valor exacto."]}),"\n",(0,i.jsxs)(a.p,{children:["Ya que estamos enviando cuatro instrucciones XCM, el peso total de las instrucciones XCM ",(0,i.jsx)(a.em,{children:"raw"})," ser\xe1 cuatro veces el peso de una sola instrucci\xf3n XCM: ",(0,i.jsx)(a.code,{children:"4 x 1_000_000_000"}),". Adem\xe1s, necesitaremos a\xf1adir el peso de la llamada ",(0,i.jsx)(a.code,{children:"transact"})," que se est\xe1 ejecutando, as\xed que en total, el peso de nuestro ejemplo ser\xe1 ",(0,i.jsx)(a.code,{children:"5 x 1_000_000_000"}),"."]}),"\n",(0,i.jsxs)(a.table,{children:[(0,i.jsx)(a.thead,{children:(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.th,{children:"Nombre"}),(0,i.jsxs)(a.th,{children:["Cantidad de peso ",(0,i.jsx)(a.code,{children:"ref_time"})]})]})}),(0,i.jsxs)(a.tbody,{children:[(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Llamada"}),(0,i.jsx)(a.td,{children:"886_264_000"})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Instrucciones XCM"}),(0,i.jsx)(a.td,{children:"4_000_000_000"})]}),(0,i.jsxs)(a.tr,{children:[(0,i.jsx)(a.td,{children:"Total"}),(0,i.jsx)(a.td,{children:"4_886_264_000"})]})]})]}),"\n",(0,i.jsxs)(a.p,{children:["El peso total es ",(0,i.jsx)(a.strong,{children:"4_886_264_000"})," unidades de ",(0,i.jsx)(a.code,{children:"ref_time"})," y ",(0,i.jsx)(a.strong,{children:"24_668"})," de ",(0,i.jsx)(a.code,{children:"proof_size"}),". Para maximizar las posibilidades de \xe9xito en la ejecuci\xf3n, deber\xedamos a\xf1adir un l\xedmite de seguridad de +10% al peso total. As\xed que ",(0,i.jsx)(a.code,{children:"ref_time"}),": ",(0,i.jsx)(a.strong,{children:"5_374_890_400"})," y ",(0,i.jsx)(a.code,{children:"proof_size"}),": ",(0,i.jsx)(a.strong,{children:"27_134"}),"."]}),"\n",(0,i.jsxs)(a.p,{children:["El peso a pagar calculado es ",(0,i.jsx)(a.strong,{children:"4.2998 mASTR"}),"."]}),"\n",(0,i.jsxs)(a.p,{children:["Para resumir, para ejecutar funciones de forma remota en la red ",(0,i.jsx)(a.code,{children:"Astar"}),", deber\xedamos:"]}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["retirar alrededor de ",(0,i.jsx)(a.strong,{children:"4.2998 mASTR"})]}),"\n",(0,i.jsxs)(a.li,{children:["especificar el peso m\xe1ximo de transacci\xf3n (+ umbral de seguridad) de ",(0,i.jsx)(a.strong,{children:"5_374_890_400"})," ",(0,i.jsx)(a.code,{children:"ref_time"})," y ",(0,i.jsx)(a.strong,{children:"27_134"})," ",(0,i.jsx)(a.code,{children:"proof_size"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,s.a)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},68708:(e,a,n)=>{n.d(a,{Z:()=>i});const i=n.p+"assets/images/001_dapps_staking_claim-f217340e5b5f9713f03ef196a5088471.png"},35995:(e,a,n)=>{n.d(a,{Z:()=>i});const i=n.p+"assets/images/002_unsigned_transaction-8894e64af4fdbc57885412cffbce1594.png"},11151:(e,a,n)=>{n.d(a,{Z:()=>d,a:()=>c});var i=n(67294);const s={},r=i.createContext(s);function c(e){const a=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:a},e.children)}}}]);